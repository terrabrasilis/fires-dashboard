var utils={datePicker:{initComponent(){let options={locale:"pt-br",viewMode:"years",format:"MM/YYYY",useCurrent:!1};$("#datepickerstart").datetimepicker(options),$("#datepickerend").datetimepicker(options)},setInterval(dt0,dt1){this.setStartDate(dt0),this.setEndDate(dt1)},setStartDate(dt){this.setProperty("start","date",dt)},setEndDate(dt){this.setProperty("end","date",dt)},getStartDate(){return this.getProperty("start","date")},getEndDate(){return this.getProperty("end","date")},setStartMinDate(dt){this.setProperty("start","minDate",dt)},setStartMaxDate(dt){this.setProperty("start","maxDate",dt)},setEndMinDate(dt){this.setProperty("end","minDate",dt)},setEndMaxDate(dt){this.setProperty("end","maxDate",dt)},setProperty(which,property,val){$("#datepicker"+which).datetimepicker(property,val)},getProperty:(which,property)=>$("#datepicker"+which).datetimepicker(property)},removeEmptyBins:function(source_group){return{all:function(){return source_group.all().filter((function(d){return(v=>{for(let p in v)if(v[p]>0)return!0;return!1})(d.value)}))}}},removeLittlestValues:function(sourceGroup){return{all:function(){return sourceGroup.all().filter((function(d){return Math.abs(d.value)<1e-6?0:d.value}))},top:function(n){return sourceGroup.top(1/0).filter((function(d){return Math.abs(d.value)>1e-6})).slice(0,n)}}},mappingClassNames:function(cl){if(void 0===graph.config.dataConfig.legendOriginal||!graph.config.dataConfig.legendOriginal[graph.bydata])return cl;for(var l=graph.config.dataConfig.legendOriginal[graph.bydata].length,i=0;i<l;i++)if(graph.config.dataConfig.legendOriginal[graph.bydata][i].toLowerCase()===cl.toLowerCase()){cl=graph.config.dataConfig.legendOverlay[graph.bydata][Lang.language][i];break}return cl},downloadCSV:function(data,suffix){let my_cvs=d3.dsv(";","text/csv");var blob=new Blob([my_cvs.format(data)],{type:"text/csv;charset=utf-8"});saveAs(blob,(suffix||"")+downloadCtrl.getProject()+"-month-"+downloadCtrl.getDownloadTime()+".csv")},setStateAnimateIcon:function(id,enable,error){document.getElementById(id).style.display="",document.getElementById(id).className=enable?"glyphicon glyphicon-refresh glyphicon-refresh-animate":"glyphicon "+(error?"glyphicon-warning-sign glyphicon-red":"glyphicon-ok glyphicon-green")},getSelectedFormatFile:function(){var opt=document.getElementById("download-option");return opt||(opt="SHAPE-ZIP"),opt[opt.selectedIndex].value},setTitle:function(elementId,title){elementId="title-chart-"+elementId,document.getElementById(elementId).innerHTML=this.wildcardExchange(title)},wildcardExchange:function(str){var dim="prodes"==graph.bydata?Translation[Lang.language].bydata:graph.bydata.toUpperCase();return str=str.replace(/%dim%/gi,(function(x){return dim}))},numberByUnit:function(num,displayPercent){let percent=(100*num/graph.totalFocusesGroup.value().n).toFixed(1)+"%",nf;return"\n"+localeBR.numberFormat(",")(num.toFixed(0))+" "+Translation[Lang.language].unit_focus+(displayPercent?"\n("+percent+")":"")},onResize:function(event){clearTimeout(graph.config.resizeTimeout),graph.config.resizeTimeout=setTimeout(graph.doResize,100)},getDefaultHeight:function(){return 1*(.4*window.innerHeight).toFixed(0)}};